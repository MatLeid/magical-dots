language: android

android:
  components:
    - platform-tools
    - tools

branches:
  only:
    - master

before_install:
    - chmod +x gradlew
    - git config --global user.email "ci@donmatheo.de"
    - git config --global user.name "Travis CI"

script: ./gradlew html:dist

after_script:
    - cd ~
    - ssh-add .travis/id_rsa.enc
    - mkdir pages
    - cd pages
    - git clone -b gh-pages --single-branch https://github.com/donmatheo/unstable-relations.git gh-pages
    - cp -r ../unstable-relations/html/build/dist gh-pages/app
    - cd gh-pages
    - git add app
    - git commit -a -m 'Committed by Travis-CI build'
    - git push origin gh-pages
